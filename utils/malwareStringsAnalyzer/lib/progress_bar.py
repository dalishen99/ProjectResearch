# -*- coding: utf-8 -*-
import time, sys

class ProgressBar(object):

    def __init__(self):
        self.bar = None
        self.bar_size = 50
        self.max_val = 0
        self.cur_val = 0

    def cur_percentage(self):
        return (self.cur_val * 100) / self.max_val

    def cur_progression(self):
        prog = ""
        nb_prog = (self.cur_percentage()) * self.bar_size / 100
        prog += "\033[1;47m \033[1;m" * nb_prog
        prog += " " * (self.bar_size - nb_prog)
        return prog

    def display_bar(self):
        print "\r{}% |".format(self.cur_percentage()) + self.cur_progression() \
                + "|" + " ({}/{} strings)".format(self.cur_val, self.max_val),
        sys.stdout.flush()

    def init(self, iterable, init_str):
        print init_str + "\033[1;33m ● \033[1;m"
        self.max_val = len(iterable)
        self.display_bar

    def update(self):
        self.cur_val += 1
        self.display_bar()

    def close(self, str, endedCorrectly):
        print "\033[F" + str,
        if endedCorrectly is True:
            print "\033[1;32m✓\033[1;m",
        else:
            print "\033[1;31m✗\033[1;m",
        print " " * 30 + "\n" + " " * 100 + "\r\033[F"
